<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punku Chat Widget - Swarovski Theme Demo</title>
</head>
<body style="width: 100vh; height: 100vh; background-color: #ffffff;">
    <h1 style="color: #1a1a1a; font-family: 'Didot', 'Bodoni MT', system-ui, serif; padding: 20px; font-weight: 300; letter-spacing: 1px;">Punku Chat Widget - Swarovski Theme</h1>
    <p style="color: #4a4a4a; font-family: system-ui, -apple-system, sans-serif; padding: 0 20px; max-width: 600px; line-height: 1.6;">This demonstrates the chat widget with the elegant Swarovski theme featuring a clean, monochromatic aesthetic inspired by the Swarovski Crystal Worlds.</p>

    <punku-chat
        window_title="Crystal (AI)"
        welcome_message="Welcome to Swarovski Kristallwelten ‚ú® I am Crystal, your AI assistant. How can I help you today?"
        flow_id="3d85092c-4447-4f43-aa08-b13a27904108"
        host_url="https://app.punku.ai"
        theme="swarovski"
        api_key="sk-X_TRC6qSCS0bjkW3Nhpni-O_Vs3UFa4Q3uZbWM_DjkM"
        start_open="false"
        link_color="black"
    ></punku-chat>
    
    
    <script>
        // Wait for the widget to load
        function waitForWidget() {
            return new Promise((resolve) => {
                const checkWidget = () => {
                    if (window['punku-chat-widget_api']) {
                        resolve(window['punku-chat-widget_api']);
                    } else {
                        setTimeout(checkWidget, 100);
                    }
                };
                checkWidget();
            });
        }
        
        // Update status display
        function updateStatus(message) {
            const statusDiv = document.getElementById('status');
            const timestamp = new Date().toLocaleTimeString();
            if (statusDiv) {
                statusDiv.innerHTML = `[${timestamp}] ${message}`;
            } else {
                console.log(`[${timestamp}] ${message}`);
            }
        }
        
        // Programmatic control functions
        async function openChat() {
            try {
                const widget = await waitForWidget();
                widget.open();
                updateStatus('‚úÖ Chat opened programmatically');
            } catch (error) {
                updateStatus('‚ùå Error opening chat: ' + error.message);
            }
        }
        
        async function closeChat() {
            try {
                const widget = await waitForWidget();
                widget.close();
                updateStatus('‚úÖ Chat closed programmatically');
            } catch (error) {
                updateStatus('‚ùå Error closing chat: ' + error.message);
            }
        }
        
        async function checkStatus() {
            try {
                const widget = await waitForWidget();
                const isOpen = widget.isOpen();
                updateStatus(`üìä Status - Open: ${isOpen}`);
            } catch (error) {
                updateStatus('‚ùå Error checking status: ' + error.message);
            }
        }
        
        // Auto-test when page loads
        window.addEventListener('load', async function() {
            updateStatus('üöÄ Page loaded - testing widget connection...');
            
            try {
                const widget = await waitForWidget();
                updateStatus('‚úÖ Widget API loaded successfully! Ready to test programmatic control.');

                checkStatus();
                
                // Test sequence: Open -> Wait -> Close -> Wait -> Open again
                setTimeout(() => {
                    updateStatus('üîÑ Auto-opening chat in 2 seconds...');
                }, 1000);
                
                setTimeout(() => {
                    widget.open();
                    updateStatus('‚úÖ Auto-opened chat successfully!');
                }, 3000);
                
                // Close after 5 seconds
                setTimeout(() => {
                    updateStatus('üîÑ Auto-closing chat in 2 seconds...');
                }, 5000);
                
                setTimeout(() => {
                    widget.close();
                    updateStatus('‚úÖ Auto-closed chat successfully!');
                }, 7000);
                
            } catch (error) {
                updateStatus('‚ùå Error loading widget API: ' + error.message);
            }
        });
        
    </script>
</body>
</html>